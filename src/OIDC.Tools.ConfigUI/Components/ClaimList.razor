@using JGUZDV.OIDC.ProtocolServer.Model
<div>
    <div class="input-group">
        <input type="text" class="form-control" @bind-value="@NewType" />
        <input type="text" class="form-control" @bind-value="@NewValue" />
        <button class="btn btn-success" @onclick="() => AddNewValue()"><i class="fa fa-fw fa-plus"></i></button>
    </div>
    <ul class="mt-2">
        @foreach (var item in Items)
        {
            <li>
                <div class="d-flex">
                    <i class="text-danger fa fa-fw fa-times" @onclick="() => Remove(item)"></i> <span>@item.Type: @item.Value</span>
                </div>
            </li>
        }
    </ul>
</div>

@code {
    [Parameter]
    public required ICollection<Claim> Items { get; set; }

    private string? NewValue { get; set; }
    private string? NewType { get; set; }

    private void AddNewValue()
    {
        if(!string.IsNullOrEmpty(NewType) && !string.IsNullOrEmpty(NewValue))
        {
            Items.Add(new Claim(NewType, NewValue));
            NewValue = null;
            NewType = null;
        }
    }

    private void Remove(Claim item)
    {
        NewType = item.Type;
        NewValue = item.Value;
        
        Items.Remove(item);
    }
}